{{ $paramCount := len .Params }}
{{ if gt $paramCount 0 }}
<div class="pure-g">
{{ range $param := .Params }}
  {{ $items := split $param "|" }}
  {{ $itemCount := len $items }}
  <!-- Item count must be at least 2 as
  "class" and "src" must be specified -->
  {{ if le $itemCount 3 }}
  <div class="{{ index $items 0 }}">
    <div style="padding: 0 .2em">
      <img
        class="pure-img-responsive"
        src="{{ index $items 1 }}"
        alt="{{ if ge $itemCount 3 }}{{ index $items 2 }}{{ else }}{{ "" }}{{ end }}">
    </div>
  </div>
  {{ else}}
  <div class="{{ index $items 0 }}">
    <div style="padding: 0 .2em">
        <figure>
            <img
        class="pure-img-responsive"
        src="{{ index $items 1 }}"
        alt="{{ if ge $itemCount 3 }}{{ index $items 2 }}{{ else }}{{ "" }}{{ end }}">
        <figcaption class="image-caption">
            {{ if ge $itemCount 4 }}{{ index $items 3 }}{{ else }}{{ "" }}{{ end }}
        </figcaption>
        </figure>
    </div>
  </div>
  {{ end }}
{{ end }}
</div>
{{ end }}